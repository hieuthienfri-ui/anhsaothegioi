<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>LÄƒng TiÃªu Báº£o Äiá»‡n - Admin</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { background: #000; color: #39ff14; font-family: monospace; padding: 20px; text-align: center; }
        .panel { border: 2px solid #39ff14; padding: 20px; border-radius: 15px; max-width: 500px; margin: 20px auto; box-shadow: 0 0 20px #39ff14; }
        input, select { width: 90%; padding: 12px; margin: 10px 0; background: #111; border: 1px solid #39ff14; color: #fff; border-radius: 5px; }
        button { background: #39ff14; color: #000; padding: 15px; border: none; font-weight: bold; cursor: pointer; width: 95%; margin-top: 10px; }
        .log-box { height: 200px; overflow-y: auto; background: #111; border: 1px solid #333; padding: 10px; text-align: left; font-size: 12px; }
    </style>
</head>
<body>
    <h1>ğŸ¯ LÄ‚NG TIÃŠU Báº¢O ÄIá»†N</h1>
    
    <div class="panel">
        <h3>ğŸ KHO THIÃŠN MÃƒ (CODE Sá»° KIá»†N)</h3>
        <input type="text" id="c_name" placeholder="TÃªn Code...">
        <input type="number" id="c_prize" placeholder="Linh LÆ°á»£ng táº·ng...">
        <input type="number" id="c_time" placeholder="Äáº¿m ngÆ°á»£c (giÃ¢y)...">
        <select id="c_auto">
            <option value="true">Tá»± Ä‘á»™ng táº·ng cho táº¥t cáº£ Online</option>
            <option value="false">Pháº£i nháº­p tay</option>
        </select>
        <button onclick="createEvent()">PHÃT Lá»†NH Sá»° KIá»†N</button>
    </div>

    <div class="panel">
        <h3>ğŸ“œ NHáº¬T KÃ HÃ€NH Äá»˜NG</h3>
        <div id="logBox" class="log-box"></div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBzA4mRLIxG1b0e091-NL3UbrY9TstD3_Y",
            databaseURL: "https://trangchuatmin-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "trangchuatmin",
            appId: "1:433643953060:web:fb58275365a3d70233630d"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function createEvent() {
            const name = document.getElementById('c_name').value;
            const prize = document.getElementById('c_prize').value;
            const time = document.getElementById('c_time').value;
            const auto = document.getElementById('c_auto').value === "true";

            db.ref('admin/event_code').set({
                code: name, prize: prize, seconds: time, auto: auto, active: true, ts: Date.now()
            }).then(() => {
                const log = `[${new Date().toLocaleTimeString()}] ÄÃ£ phÃ¡t mÃ£ ${name} (+${prize}LL)`;
                db.ref('admin/logs').push(log);
                alert("Lá»‡nh Ä‘Ã£ phÃ¡t thÃ nh cÃ´ng!");
            });
        }

        db.ref('admin/logs').limitToLast(10).on('child_added', (snap) => {
            document.getElementById('logBox').innerHTML = `<div>${snap.val()}</div>` + document.getElementById('logBox').innerHTML;
        });
    </script>
</body>
</html>
